(this.webpackJsonpmatrix=this.webpackJsonpmatrix||[]).push([[0],{156:function(t,e,n){t.exports={canvas:"matrix_canvas__2Q3JC"}},159:function(t,e,n){t.exports=n(378)},375:function(t,e,n){},377:function(t,e,n){},378:function(t,e,n){"use strict";n.r(e);n(160);var o=n(14),a=n.n(o),i=n(151),r=n.n(i),s=(n(375),n(158)),c=n(157),h=n.n(c),l=n(152),f=n(153),u=n.n(f),d=n(154),m=n(155),p=n(62);function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e=Math.floor(e),t=Math.floor(t-e),Math.floor(Math.random()*t)+e}function w(t,e,n){var o=v(n,e);return function(t){for(var e=t.length,n=t.slice(0),o=n[0],a=e-1;a>0;a--){var i=v(a+1);o=n[a],n[a]=n[i],n[i]=o}return n}(t).slice(0,o)}var g=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2;Object(d.a)(this,t),this.canvas=e,this.fontSize=n,this.emptyRange=o,this.allWords="0123456789qwertyuiopasdfghjklzxcvbnm".split("").map((function(t){return{alpha:1,color:"#43c728",text:t}})),this.emptyEle=Object(p.a)(this.allWords[0],(function(t){t.alpha=0})),this.wordPerLine=this.allWords.length,this.minEmptyLength=0,this.minSentenceLength=0,this.pool=[],this.context=void 0;var a=e.getContext("2d");if(!a)throw new Error("not support canvas");this.context=a,a.shadowColor="#94f475",a.textBaseline="top",window.addEventListener("resize",this.resize.bind(this)),this.resize(),this.drawFrame()}return Object(m.a)(t,[{key:"clear",value:function(){this.context.globalAlpha=1,this.context.font="".concat(this.fontSize,"px MatrixCode"),this.context.fillStyle="#000",this.context.shadowOffsetX=this.context.shadowOffsetY=0,this.context.shadowBlur=2,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillRect(0,0,this.canvas.width,this.canvas.height)}},{key:"resize",value:function(){this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.wordPerLine=Math.floor(this.canvas.height/this.fontSize)+1,this.minEmptyLength=Math.floor(this.wordPerLine*this.emptyRange),this.minSentenceLength=Math.floor(this.wordPerLine*(1-this.emptyRange)),this.pool=this.preparePool(this.canvas,this.pool)}},{key:"preparePool",value:function(t,e){for(var n,o=e[e.length-1],a=o?o.x:0,i=t.width,r=function(t){t.push(n)};a<i;){var s=Math.random()<this.emptyRange;n={x:a,y:0,speed:3*Math.random()+2,lastEmptyCount:s?1:0,words:[this.emptyEle]},e=Object(p.a)(e,r),a+=this.fontSize}return e}},{key:"drawLine",value:function(t){var e=this,n=t.x,o=t.y;t.words.forEach((function(t,a){e.context.fillStyle=t.color,e.context.globalAlpha=t.alpha,e.context.fillText(t.text,n,e.fontSize*a+o)}))}},{key:"drawFrame",value:function(){var t=this;this.pool=Object(p.a)(this.pool,(function(e){e.forEach((function(e){e.y+=e.speed;var n,o=v(e.words.length);if(e.words[o].text=(n=t.allWords,n[v(n.length-1)]).text,!(e.y<-t.fontSize)){var a=Math.random()<t.emptyRange;if(e.lastEmptyCount>0&&v(e.lastEmptyCount)<t.minEmptyLength||0===e.lastEmptyCount&&a)e.lastEmptyCount+=1,e.words.unshift(t.emptyEle),e.y-=t.fontSize;else{e.lastEmptyCount=0;var i=Object(p.a)(w(t.allWords,t.minSentenceLength,t.wordPerLine/1.4),(function(t){t[t.length-1].color="#cefbe4"}));e.y-=i.length*t.fontSize,e.words=i.concat(e.words)}e.words.length>3*t.wordPerLine&&(e.words=e.words.slice(0,2*t.wordPerLine))}}))})),this.clear(),this.pool.forEach((function(e){return t.drawLine(e)})),requestAnimationFrame(this.drawFrame.bind(this))}}]),t}(),y=n(156),x=n.n(y),E=Object(o.memo)((function(t){var e=t.className,n=void 0===e?"":e,i=Object(o.useRef)(null),r=Object(o.useMemo)((function(){return h()()}),[]),c=Object(o.useState)(!1),f=Object(s.a)(c,2),d=f[0],m=f[1];return Object(o.useEffect)((function(){u()("MatrixCode",{success:function(){m(!0)}})}),[m]),Object(o.useEffect)((function(){if(d){var t=i.current;if(t)try{new g(t)}catch(e){console.error(e)}else console.error(new Error("dont support canvas"))}}),[d]),a.a.createElement(a.a.Fragment,null,a.a.createElement("canvas",{className:Object(l.a)(n,x.a.canvas),id:r,key:r,ref:i}))})),b=(n(377),function(){return a.a.createElement("div",{className:"App"},a.a.createElement(E,{className:"fullserceen"}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[159,1,2]]]);
//# sourceMappingURL=main.dff9e397.chunk.js.map